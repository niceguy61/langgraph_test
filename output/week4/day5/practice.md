# Week 4 Day 5 ì‹¤ìŠµ ê°€ì´ë“œ

## âš ï¸ í•„ìˆ˜ ì‚¬ì „ ì¤€ë¹„

> **ğŸš¨ ì¤‘ìš”:** ì‹¤ìŠµì„ ì‹œì‘í•˜ê¸° ì „ì— ë°˜ë“œì‹œ ì•„ë˜ ê°€ì´ë“œë¥¼ ë¨¼ì € ì™„ë£Œí•˜ì„¸ìš”!

### ğŸ“š í•„ìˆ˜ ì„ í–‰ ë¬¸ì„œ
ì‹¤ìŠµì„ ì‹œì‘í•˜ê¸° ì „ì— ë‹¤ìŒ ë¬¸ì„œë“¤ì„ **ë°˜ë“œì‹œ** ë¨¼ì € ì½ê³  ì™„ë£Œí•˜ì„¸ìš”:

| ë¬¸ì„œ | ì„¤ëª… | í•„ìˆ˜ ì—¬ë¶€ |
|-----|------|----------|
| [AWS ê³„ì • ìƒì„± ê°€ì´ë“œ](../prerequisites/aws-account-setup.md) | AWS ê³„ì •ì´ ì—†ë‹¤ë©´ ì´ ê°€ì´ë“œë¥¼ ë”°ë¼ ê³„ì •ì„ ìƒì„±í•˜ì„¸ìš” | âœ… í•„ìˆ˜ |
| [AWS CLI ì„¤ì¹˜ ê°€ì´ë“œ](../prerequisites/aws-cli-setup.md) | AWS CLI ì„¤ì¹˜ ë° ì„¤ì • ë°©ë²• | âœ… í•„ìˆ˜ |
| [IAM ì‚¬ìš©ì ìƒì„± ê°€ì´ë“œ](../prerequisites/iam-user-setup.md) | ì‹¤ìŠµìš© IAM ì‚¬ìš©ì ìƒì„± ë°©ë²• | âœ… í•„ìˆ˜ |
| [VS Code ì„¤ì • ê°€ì´ë“œ](../prerequisites/vscode-setup.md) | ê°œë°œ í™˜ê²½ ì„¤ì • (ì„ íƒ) | ì„ íƒ |

### âœ… ì‚¬ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸
ì‹¤ìŠµì„ ì‹œì‘í•˜ê¸° ì „ ì•„ë˜ í•­ëª©ë“¤ì„ ëª¨ë‘ í™•ì¸í•˜ì„¸ìš”:

- [ ] AWS ê³„ì •ì´ ìˆê³  ë¡œê·¸ì¸í•  ìˆ˜ ìˆë‹¤
- [ ] AWS CLIê°€ ì„¤ì¹˜ë˜ì–´ ìˆë‹¤ (`aws --version` ìœ¼ë¡œ í™•ì¸)
- [ ] AWS CLI ìê²© ì¦ëª…ì´ ì„¤ì •ë˜ì–´ ìˆë‹¤ (`aws sts get-caller-identity` ë¡œ í™•ì¸)
- [ ] ì‹¤ìŠµì— í•„ìš”í•œ IAM ê¶Œí•œì´ ìˆë‹¤
- [ ] ê²°ì œ ì•Œë¦¼ì´ ì„¤ì •ë˜ì–´ ìˆë‹¤ (ì˜ˆìƒì¹˜ ëª»í•œ ë¹„ìš© ë°©ì§€)

```bash
# ì‚¬ì „ ì¤€ë¹„ í™•ì¸ ëª…ë ¹ì–´
aws --version
aws sts get-caller-identity
```

> **âš ï¸ ì£¼ì˜:** ìœ„ ì²´í¬ë¦¬ìŠ¤íŠ¸ê°€ ëª¨ë‘ ì™„ë£Œë˜ì§€ ì•Šì•˜ë‹¤ë©´ ì‹¤ìŠµì„ ì§„í–‰í•˜ì§€ ë§ˆì„¸ìš”!
> ë¬¸ì œ ë°œìƒ ì‹œ í•´ê²°ì´ ì–´ë ¤ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ¯ ì‹¤ìŠµ ëª©í‘œ
ì´ ì‹¤ìŠµì„ ì™„ë£Œí•˜ë©´ ë‹¤ìŒì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
- [ ] **CloudFormation ìŠ¤íƒ ìƒì„±** (ê¸°ë³¸ ë¦¬ì†ŒìŠ¤ ìƒì„±)
- [ ] **CDKë¥¼ í™œìš©í•œ ì¸í”„ë¼ ì •ì˜** (TypeScriptë¡œ ìŠ¤íƒ ì •ì˜)
- [ ] **Systems Manager ì‚¬ìš©ë²• ìµíˆê¸°** (State Manager ì„¤ì •)

## â±ï¸ ì˜ˆìƒ ì†Œìš” ì‹œê°„
- ì „ì²´ ì‹¤ìŠµ: ì•½ 30-45ë¶„
- Step 1: ì•½ 10ë¶„
- Step 2: ì•½ 15ë¶„
- Step 3: ì•½ 10ë¶„
- ë¦¬ì†ŒìŠ¤ ì •ë¦¬: ì•½ 5ë¶„

---

## ğŸ“ ì‹¤ìŠµ ë‹¨ê³„

### Step 1: CloudFormation ìŠ¤íƒ ìƒì„± (ì•½ 10ë¶„)

#### 1.1 CloudFormation ìŠ¤íƒ ìƒì„±
```bash
# EC2 ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ìš© í…œí”Œë¦¿ ìƒì„±
aws cloudformation create-stack --stack-name my-first-stack \
--template-body file://cloudformation.yaml \
--capabilities CAPABILITY_IAM
```

**ì˜ˆìƒ ì¶œë ¥:**
```
{
  "StackId": "arn:aws:cloudformation:region:account-id:stack/my-first-stack/uuid"
}
```

> **ğŸ’¡ ì„¤ëª…:** `cloudformation.yaml` íŒŒì¼ì„ í†µí•´ EC2 ì¸ìŠ¤í„´ìŠ¤ì™€ ë³´ì•ˆ ê·¸ë£¹ì„ ìƒì„±í•©ë‹ˆë‹¤. `CAPABILITY_IAM` ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.

#### 1.2 AWS ì½˜ì†”ì—ì„œ ìŠ¤íƒ í™•ì¸
1. [AWS Management Console](https://console.aws.amazon.com/cloudformation/) ì ‘ì†
2. "my-first-stack" ê²€ìƒ‰
3. "CREATE_COMPLETE" ìƒíƒœ í™•ì¸

> **ğŸ“¸ í™”ë©´ í™•ì¸:** EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ëœ ë¦¬ì†ŒìŠ¤ ëª©ë¡ì´ ë³´ì´ë©´ ì •ìƒì…ë‹ˆë‹¤.

#### âœ… Step 1 ì™„ë£Œ í™•ì¸
- [ ] CloudFormation ìŠ¤íƒ ìƒì„± ì™„ë£Œ
- [ ] EC2 ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì™„ë£Œ

---

### Step 2: CDKë¡œ ì¸í”„ë¼ ì •ì˜ (ì•½ 15ë¶„)

#### 2.1 CDK í™˜ê²½ ì„¤ì •
```bash
# CDK ì„¤ì¹˜
npm install -g aws-cdk

# í”„ë¡œì íŠ¸ ìƒì„±
mkdir cdk-demo && cd cdk-demo
cdk init --language typescript
```

#### 2.2 TypeScriptë¡œ ìŠ¤íƒ ì •ì˜
```typescript
// lib/cdk-demo-stack.ts
import * as cdk from 'aws-cdk-lib';
import { Vpc, Instance, InstanceType, MachineImage } from 'aws-cdk-lib';

export class CdkDemoStack extends cdk.Stack {
  constructor(scope: cdk.App, id: string, props?: cdk.StackProps) {
    super(scope, id, props);

    const vpc = new Vpc(this, 'MyVpc', {
      maxAzs: 2,
      vpnGateway: false
    });

    new Instance(this, 'MyInstance', {
      vpc,
      instanceType: InstanceType.of(InstanceType.TYPE_T2_MICRO),
      machineImage: MachineImage.latestAmazonLinux()
    });
  }
}
```

#### 2.3 ìŠ¤íƒ ë°°í¬
```bash
# ìŠ¤íƒ ë°°í¬
cdk deploy
```

> **ğŸ’¡ ì„¤ëª…:** CDKëŠ” ìë™ìœ¼ë¡œ AWS ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•˜ê³ , ë³€ê²½ ì‚¬í•­ì„ ì¶”ì í•©ë‹ˆë‹¤. `cdk destroy`ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### âœ… Step 2 ì™„ë£Œ í™•ì¸
- [ ] CDK í”„ë¡œì íŠ¸ ìƒì„± ì™„ë£Œ
- [ ] EC2 ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì™„ë£Œ

---

### Step 3: Systems Manager ì‚¬ìš© (ì•½ 10ë¶„)

#### 3.1 State Manager ë¬¸ì„œ ìƒì„±
```bash
# State Manager ë¬¸ì„œ ìƒì„±
aws ssm create-document --name "MyCustomDocument" \
--content file://state-manager.json
```

**state-manager.json ì˜ˆì‹œ:**
```json
{
  "schemaVersion": "2.2",
  "description": "Sample State Manager document",
  "formatVersion": "2.2",
  "parameters": {
    "InstanceId": {
      "type": "String"
    }
  },
  "mainSteps": [
    {
      "action": "runCommand",
      "name": "RunCommand",
      "inputs": {
        "commands": ["echo 'Hello from State Manager!'"],
        "target": [{"key": "InstanceIds", "value": ["${InstanceId}"]}]
      }
    }
  ]
}
```

#### 3.2 ì¸ìŠ¤í„´ìŠ¤ ê´€ë¦¬
```bash
# ì¸ìŠ¤í„´ìŠ¤ ID í™•ì¸
aws ec2 describe-instances --query "Reservations[].Instances[].InstanceId"
```

#### 3.3 ëª…ë ¹ ì‹¤í–‰
```bash
# State Manager ëª…ë ¹ ì‹¤í–‰
aws ssm send-command --document-name "MyCustomDocument" \
--parameters '{"InstanceId": ["i-1234567890abcdef0"]}'
```

> **ğŸ“¸ í™”ë©´ í™•ì¸:** SSM Command Centerì—ì„œ ëª…ë ¹ ì‹¤í–‰ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### âœ… Step 3 ì™„ë£Œ í™•ì¸
- [ ] State Manager ë¬¸ì„œ ìƒì„± ì™„ë£Œ
- [ ] ì¸ìŠ¤í„´ìŠ¤ì— ëª…ë ¹ ì‹¤í–‰ ì™„ë£Œ

---

## âœ… ì‹¤ìŠµ ì™„ë£Œ í™•ì¸

### ìµœì¢… í™•ì¸ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] CloudFormation ìŠ¤íƒ ìƒì„± ì™„ë£Œ
- [ ] CDKë¡œ ì¸í”„ë¼ ì •ì˜ ì™„ë£Œ
- [ ] Systems Manager ì‚¬ìš© ì™„ë£Œ

### ì˜ˆìƒ ìµœì¢… ê²°ê³¼
```bash
# ë¦¬ì†ŒìŠ¤ í™•ì¸
aws ec2 describe-instances
aws cloudformation list-stacks
aws ssm list-commands
```

**ì˜ˆìƒ ì¶œë ¥:**
```
{
  "Stacks": [
    {
      "StackId": "arn:aws:cloudformation:region:account-id:stack/my-first-stack/uuid"
    }
  ]
}
```

---

## ğŸ”§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: `ValidationError: Template error: the length of the template is 0`
**ì¦ìƒ:** í…œí”Œë¦¿ íŒŒì¼ì´ ëˆ„ë½ëœ ê²½ìš°  
**ì›ì¸:** `cloudformation.yaml` íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŒ  
**í•´ê²° ë°©ë²•:**
```bash
# í…œí”Œë¦¿ íŒŒì¼ ìƒì„±
echo "AWSTemplateFormatVersion: '2010-09-09'
Resources:
  MyEC2:
    Type: AWS::EC2::Instance
    Properties:
      InstanceType: t2.micro
      ImageId: ami-0c55b159cbfafe1f0
      SecurityGroupIds:
        - !Ref MySecurityGroup" > cloudformation.yaml
```

### ë¬¸ì œ 2: ê¶Œí•œ ì˜¤ë¥˜ (AccessDenied)
**ì¦ìƒ:** `AccessDenied` ì˜¤ë¥˜ ë°œìƒ  
**í•´ê²° ë°©ë²•:**
1. IAM ì‚¬ìš©ì ê¶Œí•œ í™•ì¸
2. `AmazonEC2FullAccess` ë° `CloudFormationFullAccess` ì •ì±… ì¶”ê°€
```bash
# ê¶Œí•œ í™•ì¸
aws iam get-user
```

---

## ğŸ§¹ ë¦¬ì†ŒìŠ¤ ì •ë¦¬ (í•„ìˆ˜!)

> **âš ï¸ ì¤‘ìš”:** ì‹¤ìŠµ ì™„ë£Œ í›„ ë°˜ë“œì‹œ ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•˜ì„¸ìš”!
> ì •ë¦¬í•˜ì§€ ì•Šìœ¼ë©´ **ì˜ˆìƒì¹˜ ëª»í•œ ë¹„ìš©**ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì •ë¦¬í•  ë¦¬ì†ŒìŠ¤ ëª©ë¡
- [ ] CloudFormation ìŠ¤íƒ (`my-first-stack`)
- [ ] CDK ë°°í¬ëœ ì¸ìŠ¤í„´ìŠ¤
- [ ] SSM ë¬¸ì„œ ë° ëª…ë ¹

### ë¦¬ì†ŒìŠ¤ ì •ë¦¬ ëª…ë ¹ì–´
```bash
# 1. CloudFormation ìŠ¤íƒ ì‚­ì œ
aws cloudformation delete-stack --stack-name my-first-stack

# 2. CDK ë¦¬ì†ŒìŠ¤ ì‚­ì œ
cdk destroy

# 3. SSM ë¬¸ì„œ ì‚­ì œ
aws ssm delete-document --document-name "MyCustomDocument"
```

### ì •ë¦¬ ì™„ë£Œ í™•ì¸
```bash
# ë¦¬ì†ŒìŠ¤ ì‚­ì œ í™•ì¸
aws cloudformation list-stacks
aws ssm list-documents
```

---

## ğŸ“š ì¶”ê°€ í•™ìŠµ ìë£Œ
- [AWS CloudFormation ê³µì‹ ë¬¸ì„œ](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/)
- [AWS CDK íŠœí† ë¦¬ì–¼](https://docs.aws.amazon.com/cdk/latest/guide/getting_started.html)
- [Systems Manager ì‚¬ìš© ê°€ì´ë“œ](https://docs.aws.amazon.com/systems-manager/latest/userguide/what-is-ssm.html)
- [Well-Architected Framework ê°€ì´ë“œ](https://aws.amazon.com/architecture/well-architected/)