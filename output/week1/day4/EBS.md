---

| [⬅️ 이전 Day](../day3/README.md) | [📑 Day 4 목차](./README.md) | [🏠 Week 1](../README.md) | [EFS ➡️](./EFS.md) |

---

# EBS 완전 정복

## 📌 핵심 목적 (What & Why)

> **한 줄 정의:** EBS는 EC2 인스턴스에 고성능의 가상 저장 장치를 제공하는 AWS의 스토리지 서비스입니다.

### 이 서비스가 해결하는 문제
**기존의 문제점:**
- **문제 1:** EC2 인스턴스가 중단되면 데이터가 소실되는 문제가 발생했습니다. 기존 서버는 랜섬웨어나 하드웨어 고장 시 데이터를 복구하기 어려웠습니다.  
- **문제 2:** 저장 용량이 제한적이었고, 데이터 성장에 따라 추가 비용이 높아졌습니다.  
- **문제 3:** 데이터 백업 및 복구 프로세스가 복잡하고 시간이 많이 소요되었습니다.  

**EBS로 해결:**
- **해결 1:** EBS 볼륨은 EC2 인스턴스와 독립적으로 존재해 중단 시 데이터도 보존됩니다.  
- **해결 2:** gp3/io2/st1/sc1 등 다양한 볼륨 유형을 통해 성능과 비용을 균형 있게 조절할 수 있습니다.  
- **해결 3:** EBS 스냅샷 기능으로 실시간 백업을 지원해 데이터 복구 시간을 단축합니다.  

### 비유로 이해하기
EBS는 집에 빈티지 외장하드디스크를 장착한 것처럼 생각해보세요. 집을 떠나도 데이터는 안전하게 저장되어 있고, 필요할 때 언제든 접근할 수 있습니다. 더 나아가, 하드디스크를 교체하거나 추가할 수 있어 데이터 성장에 유연하게 대응할 수 있습니다.  

---

## 🎯 주요 사용 시나리오 (When to Use)

| 시나리오 | 설명 | 구체적 예시 |
|---------|------|-----------|
| 시나리오 1 | 웹 애플리케이션의 사용자 데이터를 영구적으로 저장 | 기업 A의 고객 정보 DB를 EBS로 관리해 서버 중단 시 데이터 손실 방지 |
| 시나리오 2 | 높은 IOPS 요구사항을 가진 데이터베이스 서버 | 기업 B의 MySQL 서버에 gp3 볼륨을 사용해 읽기/쓰기 성능 극대화 |
| 시나리오 3 | 대량의 로그 데이터 저장 및 분석 | 기업 C의 로그 분석 플랫폼에서 sc1 볼륨을 사용해 저비용 대용량 저장 |

**이럴 때 EBS를 선택하세요:**
- ✅ 데이터를 영구적으로 저장해야 할 때  
- ✅ 성능과 비용을 균형 있게 조절해야 할 때  
- ✅ 백업 및 복구 프로세스를 자동화해야 할 때  

**이럴 때는 다른 서비스를 고려하세요:**
- ❌ 대규모 파일 공유 필요 → **EFS** (EFS는 여러 EC2 인스턴스가 공유 파일 시스템을 사용 가능)  
- ❌ 임시 데이터 저장 → **Instance Store** (Instance Store는 인스턴스 종료 시 데이터가 소실되지만 가격이 저렴)  
- ❌ 네트워크 트래픽 제어 필요 → **Security Groups** (보안 그룹은 네트워크 접근 제어를 제공)  

---

## 🔗 연관 서비스 (Used Together With)

| 연관 서비스 | 연동 목적 | 일반적인 아키텍처 |
|------------|---------|-----------------|
| **EFS** | EBS와 함께 사용해 EC2 인스턴스 간 공유 저장소 제공 | EC2 → EFS → EBS |
| **Instance Store** | EBS와 병행해 임시 데이터 저장 및 성능 최적화 | EC2 → Instance Store + EBS |
| **Security Groups** | EBS 네트워크 접근 제어 및 보안 강화 | EC2 → Security Groups → EBS |

**자주 사용되는 아키텍처 패턴:**
```
User → EC2 (Web Server) → EBS (Persistent Storage) → RDS (Database)
```

---

## 💰 비용 구조 (Pricing)

| 과금 항목 | 요금 | 프리티어 |
|----------|-----|---------|
| **EBS 볼륨 사용량** | $0.10~$0.20/GB/월 (gp3/io2) | 월 10GB 무료 (1년간) |
| **EBS 스냅샷 저장량** | $0.01~$0.03/GB/월 | 12개월 무료 (최대 100GB) |
| **데이터 전송** | $0.01~$0.10/GB | 항상 무료 (공유 저장소는 제외) |

**비용 최적화 팁:**
1. 💡 **볼륨 유형 선택:** 성능 요구에 맞는 볼륨 유형을 선택해 과다 비용을 방지하세요.  
2. 💡 **스냅샷 관리:** 불필요한 스냅샷을 정기적으로 삭제해 저장 공간을 절약하세요.  
3. 💡 **데이터 복제:** 데이터를 다른 지역에 복제해 장애 시 복구 시간을 단축하세요.  

> **⚠️ 비용 주의:** EBS 스냅샷이 다른 지역에 저장될 경우 데이터 전송 비용이 발생할 수 있으니, 지역 선택을 주의하세요.

## 📚 핵심 개념

### 개념 1: EBS 볼륨 유형 차이 (gp3/io2/st1/sc1)
EBS는 다양한 볼륨 유형을 제공하여 다양한 워크로드에 최적화된 스토리지 솔루션을 제공합니다. **gp3**는 고성능, 유연한 IOPS, 네트워크 기반 I/O를 지원하며, **io2**는 고성능 NVMe SSD 기반의 높은 IOPS를 제공합니다. **st1**은 대용량 스토리지에 적합한 저비용 고성능 스토리지로, **sc1**은 저비용 대용량 스토리지로 사용됩니다. 각 유형은 성능, 가격, 용량에 따라 선택해야 하며, 특정 작업에 최적화된 솔루션을 제공합니다.

#### 왜 중요한가?
- **성능 최적화**: 워크로드에 맞는 볼륨 유형 선택으로 성능 향상  
- **비용 효율성**: 낮은 비용으로 대용량 스토리지 요구사항 충족  
- **유연성**: 다양한 애플리케이션 요구사항에 대응 가능  

#### 세부 요소
| 요소 | 설명 | 예시 |
|-----|-----|-----|
| **gp3** | 네트워크 기반 I/O, 최대 16TB까지 확장, 100~16,000 IOPS | 고성능 데이터베이스 서버에 적합 |
| **io2** | NVMe SSD 기반, 최대 4TB까지 확장, 100~64,000 IOPS | 실시간 분석 및 고성능 애플리케이션에 적합 |
| **st1** | 대용량 스토리지, 최대 15TB까지 확장, 100~1,000 IOPS | 대용량 백업 및 스토리지 저장소에 적합 |
| **sc1** | 저비용 대용량 스토리지, 최대 1TB까지 확장, 100~1,000 IOPS | 비정기적 백업 및 로그 저장에 적합 |

> **💡 Tip:** 성능과 비용을 고려해 볼륨 유형을 선택하세요. 예를 들어, 고성능 DB 서버에는 gp3, 대용량 백업에는 sc1을 선택할 수 있습니다.

---

### 개념 2: EBS 스냅샷 원리 및 관리
EBS 스냅샷은 EBS 볼륨의 전체 데이터를 백업하고, S3에 저장하는 기능입니다. 스냅샷은 실시간으로 생성되며, 볼륨을 복원하거나 다른 인스턴스에 볼륨을 생성하는 데 사용됩니다. **스냅샷 관리**는 데이터 백업, 복구, 클라우드 전환 시 중요한 역할을 합니다. 또한, 스냅샷은 볼륨이 생성된 시점의 데이터 상태를 기록하므로, 변경된 데이터를 복구할 수 있습니다.

#### 작동 원리
1. **스냅샷 생성**: 볼륨 데이터를 S3에 복사하며, 볼륨의 상태를 기록합니다.  
2. **스냅샷 저장**: S3 버킷에 저장되며, 볼륨이 작동 중일 때도 데이터가 계속 복사됩니다.  
3. **스냅샷 복원**: 볼륨을 삭제한 후 스냅샷을 기반으로 새로운 볼륨을 생성하거나, 기존 볼륨을 복원합니다.  

> **💡 Tip:** 자동화된 스냅샷 정책을 설정해 데이터 손실을 방지하세요. CLI 명령어 `aws ec2 create-snapshot`을 사용할 수 있습니다.

---

### 개념 3: Instance Store vs EBS 차이
**Instance Store**는 인스턴스가 실행 중일 때만 데이터를 유지하는 임시 저장소입니다. 반면 **EBS**는 볼륨이 인스턴스에 연결되어 있더라도 데이터가 지속적으로 저장됩니다. Instance Store는 고성능이 필요하지만, 인스턴스가 중단되면 데이터가 삭제됩니다. EBS는 데이터가 지속적으로 유지되며, 볼륨을 다른 인스턴스로 이동할 수 있습니다. 두 저장소는 사용 목적과 데이터 지속성에 따라 선택해야 합니다.

#### 주요 특징
1. **Instance Store**  
   - **특징 1**: 인스턴스 실행 중에만 데이터 유지 (고성능, 저비용)  
   - **특징 2**: 볼륨을 다른 인스턴스로 이동 불가능  
   - **특징 3**: 인스턴스 중단 시 데이터 손실 위험  

2. **EBS**  
   - **특징 1**: 데이터가 인스턴스와 관계없이 지속적으로 저장됨  
   - **특징 2**: 볼륨을 다른 인스턴스로 이동 가능 (유연성)  
   - **특징 3**: 볼륨 백업 및 복구 기능 지원  

> **💡 Tip:** 임시 데이터는 Instance Store, 지속적인 데이터는 EBS를 사용하세요. 예를 들어, 임시 로그 파일은 Instance Store, DB 데이터는 EBS로 저장해야 합니다.

## 🖥️ AWS 콘솔에서 EBS 사용하기

### Step 1: EBS 서비스 접속  
1. AWS Management Console에 로그인합니다  
   - URL: https://console.aws.amazon.com  
   - **IAM 권한**: EBS 관리 권한이 부여된 IAM 사용자로 로그인해야 합니다  
2. 상단 검색창에서 "EBS"를 입력하고, **Elastic Block Store (EBS)** 서비스를 클릭합니다  
   - 검색 결과에서 "Elastic Block Store"를 선택하면 EBS 대시보드로 이동합니다  

> **📸 화면 확인:** EBS 대시보드에서 **Volumes**, **Snapshots**, **Volumes (All)** 탭이 표시되면 정상입니다  

---

### Step 2: [주요 작업 1 - 리소스 생성]  
1. **볼륨 생성**  
   - 왼쪽 메뉴에서 **Volumes** 탭을 선택한 후 **Create volume** 버튼 클릭  
   - **Volume Type**: gp3/io2/st1/sc1 중 선택 (예: gp3: 고성능, io2: NVMe SSD)  
   - **Size**: 10GB 이상 입력 (최소 1GB)  
   - **Availability Zone**: 현재 EC2 인스턴스와 동일한 존 선택  
   - **Encrypted**: 암호화 여부 설정 (보안 요구사항에 따라 선택)  

2. **설정 옵션**  
   - **Tag**: 리소스 식별을 위한 키-값 쌍 입력 (예: `Project: Dev`)  
   - **KMS Key**: 암호화를 위해 사용할 KMS 키 선택 (암호화 활성화 시 필수)  

3. **확인 사항**  
   - **Volume Name**: 자동 생성되지만, 별칭 입력 가능 (예: `db-volume-01`)  
   - **Finalize**: 생성 버튼 클릭 후 생성 완료까지 약 1~5분 소요  

> **📸 화면 확인:** **Volumes (All)** 탭에서 생성된 볼륨이 리스트에 표시되며, **Status**가 `available`로 변경됨  

---

### Step 3: [주요 작업 2 - 설정/구성]  
1. **볼륨 연결 (Attach)**  
   - 생성된 볼륨을 EC2 인스턴스에 연결하기 위해:  
     - **Volumes** 탭에서 볼륨 선택 → **Actions** → **Attach Volume**  
     - **Instance ID**: 연결할 EC2 인스턴스 선택  
     - **Device Name**: `/dev/xvd` 형식으로 자동 지정 (예: `/dev/xvdf`)  

2. **태그 추가**  
   - 볼륨 상세 페이지에서 **Tags** 탭으로 이동 → **Edit tags** 클릭  
   - 추가 태그 입력 (예: `Environment: Production`)  

3. **암호화 설정**  
   - 볼륨 생성 시 암호화가 활성화된 경우:  
     - **Actions** → **Modify Volume** → **Encrypted** 상태 확인  
     - 암호화 해제는 **Modify Volume**에서 `Encrypted: No`로 변경 가능 (단, 데이터 복구 시 주의 필요)  

> **⚠️ 주의:** 프로덕션 환경에서는 항상 **Encrypted** 옵션을 활성화하여 데이터 유출 위험을 최소화해야 합니다  

---

### Step 4: 설정 확인 및 테스트  
1. **리소스 확인 방법**  
   - **Volumes** 탭에서 생성된 볼륨을 필터링하여 검색  
   - **Status**가 `in-use`이면 EC2 인스턴스에 성공적으로 연결됨  

2. **상태 확인 방법**  
   - **EC2 Console**에서 인스턴스 상세 페이지 → **Storage** 탭 확인  
   - 연결된 EBS 볼륨의 **Volume ID**와 **Device Name**을 비교하여 일치 여부 확인  

3. **정상 동작 테스트**  
   - EC2 인스턴스에 SSH 접속 후 `df -h` 명령어로 볼륨 마운트 확인  
   - 파일 쓰기/읽기 테스트: `echo "test" > /mnt/testfile` 및 `cat /mnt/testfile` 실행  

> **📸 화면 확인:** EC2 인스턴스에서 `df -h` 결과에 생성된 볼륨이 표시되며, 파일 작업이 정상적으로 수행됨  

---  
**CLI 명령어 예시:**  
```bash
# EBS 볼륨 생성
aws ec2 create-volume --availability-zone us-west-2a --size 20 --volume-type gp3

# 볼륨 연결
aws ec2 attach-volume --volume-id vol-1234567890abcdef0 --instance-id i-1234567890abcdef0 --device /dev/xvdf

# 볼륨 상태 확인
aws ec2 describe-volumes --volume-ids vol-1234567890abcdef0
```

## ⌨️ AWS CLI로 EBS 사용하기

### 사전 준비
```bash
# AWS CLI 버전 확인
aws --version

# AWS 자격 증명 확인
aws sts get-caller-identity

# 현재 리전 확인
aws configure get region
```

> **💡 Tip:** CLI 명령어 실행 전에 `aws configure`로 AWS 자격 증명과 리전 설정을 확인하세요.  
> **⚠️ 주의:** 리전 변경 시 EBS 리소스 위치에 따라 작업이 영향을 받을 수 있습니다.  

---

### 예제 1: EBS 리소스 조회
```bash
# [EBS 볼륨 목록 조회]
aws ec2 describe-volumes --query 'Volumes[*].VolumeId' --output table
```

**옵션 설명:**
| 옵션 | 설명 | 예시 값 |
|-----|------|--------|
| `--query` | 필터링 표현식 (예: `Volumes[*].VolumeId`) | `'Volumes[*].VolumeId'` |
| `--output` | 출력 형식 (json, table, text) | `table` |

**예상 출력:**
```
| VolumeId |
| vol-12345678 |
| vol-87654321 |
```

> **💡 Tip:** `--query`를 사용해 특정 필드만 출력하거나, `--output json`으로 전체 JSON 응답을 확인하세요.  

---

### 예제 2: EBS 리소스 생성
```bash
# [EBS 볼륨 생성]
aws ec2 create-volume \
    --size 10 \
    --availability-zone us-east-1a \
    --volume-type gp3
```

**필수 옵션:**
- `--size`: 볼륨 크기 (GiB 단위)
- `--availability-zone`: 볼륨 생성 리전
- `--volume-type`: 볼륨 유형 (gp3/io2/st1/sc1)

**예상 출력:**
```json
{
    "VolumeId": "vol-0123456789abcdef0",
    "State": "creating"
}
```

> **💡 Tip:** `gp3`는 고성능, `st1`은 대용량 스토리지, `sc1`은 저비용 대용량에 적합합니다.  

---

### 예제 3: EBS 리소스 수정
```bash
# [EBS 볼륨 수정 (예: 태그 추가)]
aws ec2 create-tags \
    --resources vol-0123456789abcdef0 \
    --tags Key=Environment,Value=Production
```

> **⚠️ 주의:** EBS 볼륨은 직접 수정이 불가능합니다. 태그 추가/삭제는 `create-tags` 명령어로 가능합니다.  
> **💡 Tip:** 볼륨을 인스턴스에 부착 후 수정 작업이 필요한 경우, `attach-volume` 명령어를 사용하세요.  

---

### 예제 4: EBS 리소스 삭제
```bash
# [EBS 볼륨 삭제]
aws ec2 delete-volume --volume-id vol-0123456789abcdef0

# 삭제 확인
aws ec2 describe-volumes --volume-id vol-0123456789abcdef0
```

**예상 출력:**
```json
{
    "Volumes": [
        {
            "VolumeId": "vol-0123456789abcdef0",
            "State": "deleted"
        }
    ]
}
```

> **⚠️ 주의:** 삭제는 되돌릴 수 없습니다. 삭제 전에 `describe-volumes`로 상태를 확인하세요.  

---

### 자주 사용하는 명령어 정리
```bash
# 조회
aws ec2 describe-volumes --query 'Volumes[*].VolumeId' --output table
aws ec2 describe-volumes --volume-id vol-0123456789abcdef0

# 생성
aws ec2 create-volume --size 10 --availability-zone us-east-1a --volume-type gp3

# 수정 (태그 추가)
aws ec2 create-tags --resources vol-0123456789abcdef0 --tags Key=Project,Value=Demo

# 삭제
aws ec2 delete-volume --volume-id vol-0123456789abcdef0
```

---

### CLI 사용 팁
| 팁 | 설명 |
|----|------|
| **리전 설정** | `aws configure set region us-east-1` 명령어로 리전을 변경하세요. |
| **비용 관리** | `aws ec2 describe-volumes --query 'Volumes[*].{VolumeId:VolumeId,Size:Size}'`로 사용량을 모니터링하세요. |
| **자동화** | CLI 스크립트로 볼륨 생성/삭제를 자동화해 운영 효율성을 높이세요. |

> **💡 Tip:** AWS CLI는 자동화 스크립트 작성에 강력한 도구입니다. `--output text`로 결과를 파일에 기록해 로그 관리가 가능합니다.

## 🎯 SAA-C03 시험 핵심 포인트

### 시험에서 자주 출제되는 EBS 포인트

#### 📌 핵심 출제 포인트 TOP 5
1. **EBS 볼륨 유형 차이 (gp3/io2/st1/sc1)**  
   - 설명: AWS에서 제공하는 4가지 EBS 볼륨 유형은 성능, 용량, 가격에 따라 구분되며, 시험에서 특정 시나리오에 적합한 유형을 선택하는 문제가 자주 출제됩니다. 예: 고성능 I/O가 필요한 경우 `io2` 또는 `gp3`를 선택해야 합니다.  
   - 키워드: `IOPS`, `성능`, `가격`, `볼륨 유형`

2. **EBS 스냅샷 원리 및 관리**  
   - 설명: 스냅샷은 데이터 복구 및 백업에 필수적이며, 스냅샷의 복제, 복구, 저장소 비용 관리 등은 시험에서 반드시 이해해야 하는 개념입니다. 특히 스냅샷이 생성될 때 데이터 전송 중인 경우의 동작도 중요합니다.  
   - 키워드: `백업`, `복구`, `스냅샷`, `저장소 비용`

3. **EFS vs EBS 차이점**  
   - 설명: EFS는 파일 시스템 기반의 클라우드 스토리지 서비스로, EBS는 블록 기반 스토리지입니다. 시험에서 "서버 간 공유 파일 시스템" 또는 "고가용성 파일 저장소"가 필요한 경우 EFS를, "개별 인스턴스의 고성능 스토리지"가 필요한 경우 EBS를 선택해야 합니다.  
   - 키워드: `파일 시스템`, `고가용성`, `블록 스토리지`, `클라우드 스토리지`

4. **Instance Store vs EBS 차이**  
   - 설명: Instance Store는 인스턴스와 동기화되는 임시 스토리지로, 데이터 손실 위험이 있으며, EBS는 별도의 저장소로 데이터를 유지합니다. 시험에서 "데이터 지속성" 또는 "인스턴스 종료 시 데이터 보존 여부"를 묻는 문제가 자주 출제됩니다.  
   - 키워드: `임시 저장소`, `데이터 지속성`, `인스턴스 종료`, `EBS vs Instance Store`

5. **보안 그룹 규칙 및 트래픽 제어**  
   - 설명: 보안 그룹은 네트워크 트래픽을 제어하는 필수 요소로, 시험에서 "특정 포트 열기", "IP 범위 제한", "SSH 접근 허용" 등과 같은 규칙 설정 문제를 풀 수 있는지 확인합니다.  
   - 키워드: `네트워크 보안`, `보안 그룹`, `트래픽 제어`, `포트 설정`

#### ⚠️ 시험에서 자주 나오는 함정
| 함정 유형 | 설명 | 올바른 답변 |
|----------|------|------------|
| 함정 1 | `sc1` 볼륨 유형이 고성능 I/O에 적합하다고 오해 | `sc1`은 저비용 저성능 볼륨으로, 고성능 I/O는 `io2` 또는 `gp3` 사용 |
| 함정 2 | EBS 스냅샷이 즉시 복구 가능한 것으로 오인 | 스냅샷 복구는 복제 시간이 소요되며, 복구 시점에 따라 데이터가 달라질 수 있음 |
| 함정 3 | Instance Store의 데이터가 인스턴스 종료 시 자동 삭제되지 않는다고 오인 | Instance Store는 인스턴스 종료 시 자동 삭제되며, 데이터 보존이 필요할 경우 EBS 사용 |

#### 🔄 EBS vs 비슷한 서비스 비교 (시험 단골!)
| 비교 항목 | EBS | 대안 서비스 | 선택 기준 |
|----------|----------|-----------|----------|
| 용도 | 블록 기반 스토리지 (개별 인스턴스 저장소) | EFS (파일 시스템), S3 (객체 저장소), Instance Store (임시 저장소) | 데이터 지속성, 성능 요구사항, 사용 목적 |
| 확장성 | 볼륨 크기 확장 가능, 복수 인스턴스에 공유 불가 | EFS는 다중 인스턴스 공유 가능, S3는 글로벌 접근 가능 | 인스턴스 간 데이터 공유 여부, 글로벌 접근 필요 여부 |
| 비용 | 볼륨 크기 및 IOPS에 따라 비용 증가 | EFS는 데이터 저장소 크기, S3는 저장량 및 액세스 빈도에 따라 비용 증가 | 성능/용량 요구사항, 데이터 지속성 필요 여부 |
| 지연시간 | 블록 I/O로 저지연, IOPS 제한 | EFS는 파일 시스템 기반으로 지연 시간이 더 큼, S3는 객체 접근 시 지연 발생 | 실시간 처리, 고성능 I/O 요구 |

#### 📝 시험 대비 체크리스트
- [ ] EBS의 핵심 목적을 한 문장으로 설명할 수 있는가?  
  *예: "EBS는 AWS에서 인스턴스에 고성능, 지속적인 블록 스토리지 제공"*  
- [ ] EBS를 선택해야 하는 시나리오를 알고 있는가?  
  *예: "고성능 I/O 필요, 데이터 지속성 보장, 개별 인스턴스 저장"*  
- [ ] EBS의 제한사항/한계를 알고 있는가?  
  *예: "Instance Store보다 가격 비용이 높음, 볼륨 크기 및 IOPS 제한"*  
- [ ] EBS와 비슷한 서비스의 차이점을 설명할 수 있는가?  
  *예: "EFS는 파일 시스템 기반, S3는 객체 저장소, Instance Store는 임시 저장소"*  
- [ ] EBS의 비용 구조를 이해하고 있는가?  
  *예: "볼륨 크기, IOPS, 데이터 전송량에 따라 비용 발생, 프리티어 제한 사항 확인 필요"*  

#### 💡 시험 팁
> **키워드 매칭:** 문제에서 이런 키워드가 나오면 EBS를 떠올리세요:  
> - `지속적인 저장소`  
> - `IOPS`  
> - `스냅샷`  
> - `블록 스토리지`  
> - `인스턴스 저장소`

---

| [⬅️ 이전 Day](../day3/README.md) | [📑 Day 4 목차](./README.md) | [🏠 Week 1](../README.md) | [EFS ➡️](./EFS.md) |

---
